(function(e){function t(t){for(var r,o,i=t[0],s=t[1],u=t[2],d=0,l=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&l.push(a[o][0]),a[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);b&&b(t);while(l.length)l.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,o=1;o<n.length;o++){var i=n[o];0!==a[i]&&(r=!1)}r&&(c.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={app:0},a={app:0},c=[];function i(e){return s.p+"js/"+({bookmarkedTab:"bookmarkedTab",dashboard:"dashboard",register:"register",settingsTab:"settingsTab"}[e]||e)+"."+{bookmarkedTab:"dd9a38ad",dashboard:"f8af5879",register:"793b8617",settingsTab:"8605207d"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={dashboard:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var r="css/"+({bookmarkedTab:"bookmarkedTab",dashboard:"dashboard",register:"register",settingsTab:"settingsTab"}[e]||e)+"."+{bookmarkedTab:"31d6cfe0",dashboard:"d18dbabe",register:"31d6cfe0",settingsTab:"31d6cfe0"}[e]+".css",a=s.p+r,c=document.getElementsByTagName("link"),i=0;i<c.length;i++){var u=c[i],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===r||d===a))return t()}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){u=l[i],d=u.getAttribute("data-href");if(d===r||d===a)return t()}var b=document.createElement("link");b.rel="stylesheet",b.type="text/css",b.onload=t,b.onerror=function(t){var r=t&&t.target&&t.target.src||a,c=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");c.code="CSS_CHUNK_LOAD_FAILED",c.request=r,delete o[e],b.parentNode.removeChild(b),n(c)},b.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(b)})).then((function(){o[e]=0})));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var c=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=c);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=i(e);var l=new Error;u=function(t){d.onerror=d.onload=null,clearTimeout(b);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",l.name="ChunkLoadError",l.type=r,l.request=o,n[1](l)}a[e]=void 0}};var b=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var b=d;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"171f":function(e,t,n){},"1e90":function(e,t,n){},"3ec0":function(e,t,n){},4198:function(e,t,n){"use strict";n("3ec0")},4360:function(e,t,n){"use strict";var r,o=n("5502"),a=n("5530"),c={setUser:function(e,t){e.user=Object(a["a"])({},t),this.state.isLoggedIn=!0},deAnonUser:function(){this.state.isLoggedIn=!1}},i={getUserStatus:function(e,t,n){return n.isLoggedIn},getUser:function(e){return e.user}},s=n("1da1"),u=(n("96cf"),n("bc3a")),d=n.n(u);r="https://photo-studios.herokuapp.com/api/v1";var l,b=d.a.create({baseURL:r,timeout:2e3,withCredentials:!0}),f=b,p={registerUser:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.token){n.next=6;break}return n.next=3,f.post("/users/register?token=".concat(t.token));case 3:r=n.sent,n.next=9;break;case 6:return n.next=8,f.post("/users/register",t);case 8:r=n.sent;case 9:return e.commit("setUser",r.data.data),n.abrupt("return",r);case 11:case"end":return n.stop()}}),n)})))()},loginUser:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.token){n.next=6;break}return n.next=3,f.post("/users/login?token=".concat(t.token));case 3:r=n.sent,n.next=9;break;case 6:return n.next=8,f.post("/users/login",t);case 8:r=n.sent;case 9:return e.commit("setUser",r.data.data),n.abrupt("return",r);case 11:case"end":return n.stop()}}),n)})))()},getMe:function(e){return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f.get("/users/me");case 2:n=t.sent,e.commit("setUser",n.data.data);case 4:case"end":return t.stop()}}),t)})))()},checkUsername:function(e,t){return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f.get("/users?username=".concat(t,"&private=true"));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))()}},g={namespaced:!0,state:function(){},mutations:c,getters:i,actions:p},m={setNotification:function(e,t){e.notification=t},clearNotification:function(e){e.notification=""}},j={getNotification:function(e){return e.notification}},h={showNotification:function(e,t){clearTimeout(l),e.commit("setNotification",t),l=setTimeout((function(){return e.commit("clearNotification")}),3e3)}},O={namespaced:!0,state:function(){return{notification:""}},mutations:m,getters:j,actions:h};t["a"]=Object(o["a"])({state:function(){return{isLoggedIn:null}},modules:{auth:g,helpers:O}})},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("a64c"),o=n("7a23"),a={class:"modal-inner"};function c(e,t,n,r,c,i){return Object(o["u"])(),Object(o["d"])(o["a"],{name:"modal",mode:"out-in"},{default:Object(o["I"])((function(){return[n.open?(Object(o["u"])(),Object(o["d"])("section",{key:0,class:"modal",onMousedown:t[1]||(t[1]=Object(o["K"])((function(t){return e.$emit("close-modal")}),["self"]))},[Object(o["g"])("div",a,[Object(o["A"])(e.$slots,"default")])],32)):Object(o["e"])("",!0)]})),_:3})}var i={props:{open:{type:Boolean,required:!0,default:!1}},emits:["close-modal"]};n("7059");i.render=c;var s=i,u={class:"loadingio-spinner-spinner-980asyuwgwf"},d=Object(o["g"])("div",{class:"ldio-nycxkrc2ksi"},[Object(o["g"])("div"),Object(o["g"])("div"),Object(o["g"])("div"),Object(o["g"])("div"),Object(o["g"])("div"),Object(o["g"])("div"),Object(o["g"])("div"),Object(o["g"])("div"),Object(o["g"])("div"),Object(o["g"])("div")],-1);function l(e,t){return Object(o["u"])(),Object(o["d"])("div",u,[d])}n("a21e");const b={};b.render=l;var f=b;function p(e,t,n,r,a,c){var i=Object(o["B"])("error-notification"),s=Object(o["B"])("router-view");return Object(o["u"])(),Object(o["d"])("div",null,[Object(o["g"])(i),Object(o["g"])(s)])}var g=Object(o["L"])("data-v-68bf94b4"),m=g((function(e,t,n,r,a,c){return Object(o["u"])(),Object(o["d"])(o["a"],{name:"notif"},{default:g((function(){return[c.notification?(Object(o["u"])(),Object(o["d"])("div",{key:0,class:"notification",onClick:t[1]||(t[1]=function(){return c.closeNotif&&c.closeNotif.apply(c,arguments)})},Object(o["E"])(c.notification),1)):Object(o["e"])("",!0)]})),_:1})})),j={computed:{notification:function(){return this.$store.getters["helpers/getNotification"]}},methods:{closeNotif:function(){this.$store.commit("helpers/clearNotification")}}};n("4198");j.render=m,j.__scopeId="data-v-68bf94b4";var h=j,O={components:{ErrorNotification:h},data:function(){return{}}};n("765b");O.render=p;var v=O,k=(n("d3b7"),n("3ca3"),n("ddb0"),n("6c02")),y=n("4360");function w(e,t,n,r,a,c){var i=Object(o["B"])("the-header"),s=Object(o["B"])("router-view");return Object(o["u"])(),Object(o["d"])("div",null,[Object(o["g"])(i),Object(o["g"])(s,null,{default:Object(o["I"])((function(e){return[Object(o["g"])(o["a"],{name:"modal",mode:"out-in"},{default:Object(o["I"])((function(){return[(Object(o["u"])(),Object(o["d"])(Object(o["C"])(e.Component)))]})),_:2},1024)]})),_:1})])}var _=Object(o["g"])("span",{class:"logo focus-ring"}," P&S ",-1),T=Object(o["f"])("Вход"),x=Object(o["f"])("Мой профиль");function C(e,t,n,r,a,c){var i=Object(o["B"])("base-button"),s=Object(o["B"])("router-link");return Object(o["u"])(),Object(o["d"])("header",null,[_,!1===c.getUserStatus?(Object(o["u"])(),Object(o["d"])(s,{key:0,to:{name:"LoginForm"}},{default:Object(o["I"])((function(){return[Object(o["g"])(i,null,{default:Object(o["I"])((function(){return[T]})),_:1})]})),_:1})):!0===c.getUserStatus?(Object(o["u"])(),Object(o["d"])(s,{key:1,to:{name:"BookmarkedTab"}},{default:Object(o["I"])((function(){return[Object(o["g"])(i,null,{default:Object(o["I"])((function(){return[x]})),_:1})]})),_:1})):Object(o["e"])("",!0)])}var B={computed:{getUserStatus:function(){return this.$store.getters["auth/getUserStatus"]}}};n("f7be");B.render=C;var U=B,I={components:{TheHeader:U}};I.render=w;var N=I,L=Object(o["g"])("h1",{class:"basic-form__header"},"ВХОД",-1),S=Object(o["g"])("div",{tabindex:"0",id:"googleBtn",class:"customGPlusSignIn focus-ring"},[Object(o["g"])("span",{class:"g-icon"}),Object(o["g"])("span",{class:"buttonText"},"Войти через Google")],-1),A=Object(o["g"])("p",null,"или",-1),E={class:"basic-form__block"},P=Object(o["g"])("label",{for:"email"},"Электронная почта",-1),R={class:"basic-form__block"},$=Object(o["g"])("label",{for:"password"},"Пароль",-1),M=Object(o["g"])("p",null,"Еще не зарегистрированы?",-1),q=Object(o["f"])("Создать аккаунт"),G=Object(o["f"])("Войти");function F(e,t,n,r,a,c){var i=Object(o["B"])("router-link"),s=Object(o["B"])("base-button"),u=Object(o["B"])("base-modal");return Object(o["u"])(),Object(o["d"])(u,{onCloseModal:c.toggleModal,open:!0},{default:Object(o["I"])((function(){return[Object(o["g"])("form",{class:"basic-form",onSubmit:t[3]||(t[3]=Object(o["K"])((function(){return c.submitCreds&&c.submitCreds.apply(c,arguments)}),["prevent"]))},[L,S,A,Object(o["g"])("div",E,[P,Object(o["J"])(Object(o["g"])("input",{type:"email",id:"email",autocomplete:"email","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.email=e})},null,512),[[o["G"],a.email]])]),Object(o["g"])("div",R,[$,Object(o["J"])(Object(o["g"])("input",{type:"password",id:"password","onUpdate:modelValue":t[2]||(t[2]=function(e){return a.password=e})},null,512),[[o["G"],a.password]])]),M,Object(o["g"])(i,{class:"focus-ring",to:{name:"RegisterForm"}},{default:Object(o["I"])((function(){return[q]})),_:1}),Object(o["g"])(s,{type:"submit",isLoading:a.isApiCall},{default:Object(o["I"])((function(){return[G]})),_:1},8,["isLoading"])],32)]})),_:1},8,["onCloseModal"])}n("ac1f"),n("5319");var H=n("c889"),J={components:{BaseButton:r["a"]},data:function(){return{email:"",password:"",isApiCall:!1}},methods:{toggleModal:function(){this.$router.push("/")},submitCreds:function(){var e=this;this.password.length<6?Object(H["a"])("Слишком короткий пароль 👀"):(this.isApiCall=!0,this.$store.dispatch("auth/loginUser",{email:this.email,password:this.password}).then((function(){return e.$router.replace("/")})).catch((function(e){var t,n;400===(null===(t=e.response)||void 0===t?void 0:t.status)?Object(H["a"])("Неверный пароль или имейл ⛔"):403===(null===(n=e.response)||void 0===n?void 0:n.status)?Object(H["a"])("Вы регистрировались через Google 🤳"):Object(H["a"])("Что-то сломалось на нашей стороне 🤦‍♂️")})).finally((function(){return e.isApiCall=!1})))}},mounted:function(){var e=this;window.googleUser={},gapi.load("auth2",(function(){var t=gapi.auth2.init({client_id:"1011107927314-ql5jokbt0f5nktn3mtcnpr6daqj7qk9m.apps.googleusercontent.com",cookiepolicy:"single_host_origin"}),n=document.getElementById("googleBtn");t.attachClickHandler(n,{},(function(t){e.isApiCall=!0;var n=t.getAuthResponse().id_token;e.$store.dispatch("auth/loginUser",{token:n}).then((function(){return e.$router.replace("/")})).catch((function(){e.$store.dispatch("helpers/showNotification","Google поломался 🤦‍♂️")})).finally((function(){return e.isApiCall=!1}))}))}))}};n("73fa");J.render=F;var D=J,K=[{path:"/",name:"Home",component:N,children:[{path:"login",name:"LoginForm",component:D},{path:"register",name:"RegisterForm",component:function(){return n.e("register").then(n.bind(null,"bbf0"))}}]},{path:"/dashboard",name:"Dashboard",component:function(){return n.e("dashboard").then(n.bind(null,"5c3a"))},children:[{path:"",name:"BookmarkedTab",component:function(){return n.e("bookmarkedTab").then(n.bind(null,"b6e8"))}},{path:"settings",name:"SettingsTab",component:function(){return n.e("settingsTab").then(n.bind(null,"443f"))}}]}],V=Object(k["a"])({history:Object(k["b"])("/"),routes:K}),z=!0;V.beforeEach((function(e,t,n){z?(z=!1,y["a"].dispatch("auth/getMe").then((function(){return n()})).catch((function(){y["a"].commit("auth/deAnonUser"),n("/")}))):n()}));var Q=V;Object(o["c"])(v).use(y["a"]).use(Q).component("base-button",r["a"]).component("base-modal",s).component("spinner",f).mount("#app")},7059:function(e,t,n){"use strict";n("a3b4")},"73fa":function(e,t,n){"use strict";n("171f")},"765b":function(e,t,n){"use strict";n("e781")},"7f23":function(e,t,n){"use strict";n("b213")},a21e:function(e,t,n){"use strict";n("f98a")},a3b4:function(e,t,n){},a64c:function(e,t,n){"use strict";var r=n("7a23"),o=Object(r["L"])("data-v-2ac88ecf");Object(r["x"])("data-v-2ac88ecf");var a={tabindex:"0",class:"base-btn focus-ring"},c={key:1,tabindex:"-1"};Object(r["v"])();var i=o((function(e,t,n,o,i,s){var u=Object(r["B"])("spinner");return Object(r["u"])(),Object(r["d"])("div",a,[n.isLoading?(Object(r["u"])(),Object(r["d"])(u,{key:0})):(Object(r["u"])(),Object(r["d"])("button",c,[Object(r["A"])(e.$slots,"default",{},void 0,!0)]))])})),s={props:{isLoading:{type:Boolean,required:!1,default:!1}}};n("7f23");s.render=i,s.__scopeId="data-v-2ac88ecf";t["a"]=s},b213:function(e,t,n){},c889:function(e,t,n){"use strict";var r=n("4360");function o(e){r["a"].dispatch("helpers/showNotification",e)}t["a"]=o},e781:function(e,t,n){},f7be:function(e,t,n){"use strict";n("1e90")},f98a:function(e,t,n){}});
//# sourceMappingURL=app.ba9c669d.js.map